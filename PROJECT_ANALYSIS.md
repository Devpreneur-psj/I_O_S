# 정령의 섬 (SOI) - 전체 프로젝트 분석 보고서

## 📋 1. 프로젝트 전체 구조 분석 결과

### 1.1 기술 스택
- **백엔드**: Spring Boot 3.2.0, Java 17
- **프론트엔드**: Thymeleaf 템플릿 + 순수 JavaScript
- **데이터베이스**: H2 (파일 기반)
- **보안**: Spring Security
- **빌드 도구**: Maven

### 1.2 프로젝트 구조

#### 백엔드 구조
```
com.soi/
├── controller/         # HTTP 컨트롤러
├── service/           # 비즈니스 로직
├── repository/        # 데이터 접근 계층
├── entity/            # JPA 엔티티
├── dto/               # 데이터 전송 객체
├── config/            # 설정 클래스
└── [도메인별]/        # 기능별 패키지 분리
    ├── spirit/        # 정령 시스템
    ├── worldtree/     # 세계수 시스템
    ├── explorer/      # 던전/전투 시스템
    ├── community/     # 커뮤니티 (친구, 광장)
    ├── game/          # 게임 시간 관리
    └── user/          # 사용자 관리
```

#### 프론트엔드 구조
```
static/
├── css/              # 19개 CSS 파일
├── js/               # 18개 JavaScript 파일
├── images/           # 이미지 리소스
└── templates/        # 23개 HTML 템플릿
```

### 1.3 게임 시스템 구조

#### 정령 시스템 흐름
1. **생성** (레벨 2 달성 시)
   - 속성 선택: 불, 물, 풀(바람), 빛, 어둠
   - 희귀도: 기본(레벨 2) / 희귀(레벨 15)
   - 성격: 고집, 조심, 장난꾸러기, 온순, 용감

2. **성장**
   - 레벨 범위: 1 ~ 50
   - 경험치 공식: n³ (현재)
   - 레벨업 시 성격에 따른 능력치 성장

3. **전투**
   - 던전 시스템 (6개 스테이지)
   - 전투 공식: 포켓몬스터 스타일
   - 속성 상성 시스템

4. **보상**
   - 경험치 획득
   - 골드 획득
   - 정령의 축복 (세계수 경험치)

5. **진화**
   - 3단계 진화 시스템 (0, 1, 2)
   - 진화별 기술 습득

#### 세계수 시스템
- 레벨 범위: 1 ~ 30
- 경험치: 현재 균등 분배 (1000씩) - **개선 필요**
- 정령의 축복: 정령이 죽으면 획득하는 포인트
- 레벨별 기능 언락

### 1.4 현재 발견된 문제점

#### 밸런스 문제
1. **정령 경험치**: n³ 공식으로 너무 급격한 상승
   - 레벨 10: 1,000 EXP
   - 레벨 20: 8,000 EXP
   - 레벨 30: 27,000 EXP
   - 레벨 50: 125,000 EXP

2. **세계수 경험치**: 균등 분배로 인한 밸런스 부족

3. **전투 밸런스**: 속성 상성은 구현되어 있으나, 레벨/스탯 밸런스 부족

#### 코드 구조 문제
1. 하드코딩된 값들 (상수화 필요)
2. 중복 코드 존재
3. Enum 부재 (속성, 성격, 스킬 타입 등)
4. 경험치 테이블이 코드에 하드코딩

#### 기능 누락
1. 정령 최대 레벨이 50인데, 요청사항은 30
2. 활동 포인트 시스템 미구현
3. 속성 상성 시스템 일부만 구현

---

## 🔧 2. 게임 밸런스 재설계 방안

### 2.1 정령 성장 시스템 (레벨 1-30으로 변경)

#### 새로운 경험치 곡선 공식
**Medium Slow 타입 (포켓몬스터)**
- 초반(1-10): 완만한 성장
- 중반(11-20): 중간 속도
- 후반(21-30): 급격한 성장

공식: `RequiredExp = (6/5) * level³ - 15 * level² + 100 * level - 140`

또는 더 간단한 공식: `RequiredExp = level * level * level * 0.8 + level * 50`

### 2.2 세계수 레벨 시스템 (레벨 1-30)

#### 새로운 경험치 곡선
**점진적 증가 방식**
- 초반(1-10): 800 ~ 1200
- 중반(11-20): 1200 ~ 2000
- 후반(21-30): 2000 ~ 3000

#### 활동 포인트 시스템 (새 명칭: "정령의 축복")
- 기존: "정령의 축복" (AvailableEssence)
- 새로운 명칭: 그대로 유지 또는 "활동 포인트"로 변경 가능

### 2.3 속성 상성 시스템 완성

#### 삼각 상성
- 불 > 풀 > 물 > 불 (2.0x / 0.5x)

#### 특수 상성
- 빛 ↔ 어둠 (2.0x / 2.0x) - 상호 강함
- 같은 속성 (0.75x) - 약간 약함

### 2.4 전투 밸런스

#### 공격 공식 개선
현재 포켓몬스터 스타일 유지하되, 밸런스 조정:
- 레벨 차이 보정: ±10% (현재 ±1%는 너무 작음)
- 속성 상성: 2.0x / 0.5x
- 랜덤 변동: 85-100% 유지

---

## 🗂 3. 구현 계획

### 단계 1: 상수 및 Enum 클래스 생성
### 단계 2: 경험치 테이블 재생성
### 단계 3: 정령 최대 레벨 30으로 변경
### 단계 4: 속성 상성 시스템 완성
### 단계 5: 코드 리팩토링

---

*분석 일시: 2025-11-29*
*분석자: AI Assistant*

