# UX/게임 플로우 문제 진단 리포트

## 📋 개요

이 문서는 "정령의 섬" 게임의 UX/게임 플로우에서 발견된 문제점들을 체계적으로 정리한 리포트입니다.

---

## 🚨 심각도 분류

- **🔴 Critical**: 게임 진행에 필수적이며 즉시 수정 필요
- **🟠 Major**: 사용자 경험을 크게 저해하는 문제
- **🟡 Minor**: 개선이 필요한 부분

---

## 🔴 Critical 이슈

### [UX-001] 튜토리얼 시스템 부재

**위치**: 
- `src/main/java/com/soi/controller/HomeController.java`
- `src/main/resources/templates/world.html`
- `src/main/java/com/soi/user/User.java`

**증상**:
- 첫 계정 생성 후 로그인 시, 아무 설명 없이 월드맵으로 리다이렉트됨
- 사용자가 무엇을 해야 할지 전혀 모름
- "정령의 축복"이 무엇인지, 어떻게 레벨업하는지 알 수 없음
- 게임의 핵심 플로우를 이해할 수 없음

**영향**:
- 신규 유저 이탈률 증가
- 게임의 핵심 재미 요소를 발견하지 못함
- 초기 경험 부정적

**개선 아이디어**:
1. `User` 엔티티에 `isTutorialCompleted` 필드 추가
2. 첫 로그인 시 튜토리얼 오버레이/모달 표시
3. 단계별 가이드:
   - Step 1: 월드맵 구조 설명
   - Step 2: 세계수의 심장으로 이동 → "정령의 축복" 설명
   - Step 3: 레벨업 방법 시연 (버튼 하이라이트)
   - Step 4: 레벨 2 달성 → 정령 생성 해금 알림
   - Step 5: 정령 생성으로 이동
   - Step 6: 정령 마을로 이동
4. 튜토리얼 완료 후 플래그 저장

**우선순위**: ⭐⭐⭐⭐⭐

---

### [UX-002] 정령 생성 해금 후 UI 실시간 반영 문제

**위치**:
- `src/main/resources/templates/world-tree.html` (라인 69)
- `src/main/resources/static/js/world-tree.js` (라인 192-201)

**증상**:
- 레벨업 후 정령 생성 버튼이 즉시 나타나지 않을 수 있음
- `th:if="${worldTreeInfo.spiritCreationUnlocked}"` 조건부 렌더링은 서버 사이드에서만 작동
- 레벨업 후 `updateSpiritCreationButton()` 함수가 호출되지만, HTML이 이미 렌더링된 후라 반영이 늦을 수 있음

**현재 구현**:
```javascript
// 레벨업 후 정령 생성 기능 언락 여부 업데이트
if (result.spiritCreationUnlocked !== undefined) {
    updateSpiritCreationButton(result.spiritCreationUnlocked);
}
```

```javascript
function updateSpiritCreationButton(unlocked) {
    const spiritCreationSection = document.querySelector('.spirit-creation-section');
    if (spiritCreationSection) {
        if (unlocked) {
            spiritCreationSection.style.display = 'block';
        } else {
            spiritCreationSection.style.display = 'none';
        }
    }
}
```

**문제점**:
- HTML에서 `th:if`로 조건부 렌더링되어 있으면, `display: none`으로 숨겨진 상태로 렌더링됨
- JavaScript로 `display: block`을 해도, 요소가 DOM에 존재하지 않을 수 있음
- 버튼이 처음부터 숨겨진 상태(`display: none`)로 시작하면 JavaScript 업데이트가 작동하지 않을 수 있음

**개선 아이디어**:
1. HTML에서 조건부 렌더링 제거하고 항상 DOM에 존재하도록 변경
2. 초기 상태를 JavaScript로 설정
3. 레벨업 시 애니메이션과 함께 버튼 표시
4. 전역 상태 관리로 동기화

**우선순위**: ⭐⭐⭐⭐⭐

---

### [UX-003] 월드맵에서 정령 생성 접근 불명확

**위치**:
- `src/main/resources/templates/world.html`

**증상**:
- 월드맵에 "정령 생성" 버튼이나 링크가 직접적으로 보이지 않음
- 사용자가 레벨 2 달성 후 어떻게 정령을 생성해야 할지 모름
- 세계수의 심장에 들어가야만 정령 생성 버튼을 발견할 수 있음

**개선 아이디어**:
1. 월드맵에서 세계수의 심장 주변에 "정령 생성 해금됨!" 알림 표시
2. 레벨 2 이상 시 월드맵에 정령 생성 아이콘 추가
3. 또는 세계수의 심장 아이콘에 "✨" 같은 표시로 해금 상태 표시

**우선순위**: ⭐⭐⭐⭐

---

## 🟠 Major 이슈

### [UX-004] 첫 로그인 시 초기 가이드 부재

**위치**:
- `src/main/java/com/soi/controller/HomeController.java`
- `src/main/resources/templates/world.html`

**증상**:
- 회원가입 → 로그인 → 월드맵으로 이동
- 월드맵에 여러 카테고리 아이콘만 보임
- 무엇을 먼저 클릭해야 할지 불명확
- "세계수의 심장"이 메인 허브라는 것을 직관적으로 알기 어려움

**개선 아이디어**:
1. 첫 로그인 시 "세계수의 심장"에 하이라이트/펄스 효과
2. 화살표 또는 "여기를 클릭하세요" 안내 표시
3. 초기 툴팁 또는 가이드 오버레이

**우선순위**: ⭐⭐⭐⭐

---

### [UX-005] 정령 생성 페이지 접근 제한 시 안내 부족

**위치**:
- `src/main/java/com/soi/spirit/controller/SpiritController.java` (라인 78-80)

**증상**:
- 레벨 2 미만일 때 정령 생성 페이지 접근 시 단순 리다이렉트
- 사용자가 왜 막혔는지, 어떻게 해금해야 하는지 명확하지 않음

**현재 코드**:
```java
if (!unlocked) {
    return "redirect:/world-tree/core?message=레벨 2 이상이 필요합니다";
}
```

**문제점**:
- 쿼리 파라미터로 메시지를 전달하지만, UI에서 표시되지 않을 수 있음
- 레벨업 방법에 대한 구체적 안내 없음

**개선 아이디어**:
1. 리다이렉트 시 명확한 에러 메시지 표시
2. 세계수의 심장 페이지에서 레벨업 방법 안내
3. "정령 생성" 버튼을 잠금 상태로 표시하고 "레벨 2 필요" 툴팁

**우선순위**: ⭐⭐⭐

---

### [UX-006] 월드맵 카테고리 모달의 시설 설명 부족

**위치**:
- `src/main/resources/templates/world.html`
- `src/main/resources/static/js/world.js`

**증상**:
- 카테고리 클릭 시 하위 시설 리스트만 보임
- 각 시설이 무엇을 하는지, 언제 사용하는지 설명 없음
- 신규 유저가 각 시설의 용도를 파악하기 어려움

**개선 아이디어**:
1. 각 시설 카드에 간단한 설명 추가
2. 해금 레벨 표시
3. "아직 잠금" 상태의 시설도 표시 (해금 조건 안내)

**우선순위**: ⭐⭐⭐

---

### [UX-007] 정령 마을 초기 빈 화면

**위치**:
- `src/main/resources/templates/spirit-village.html`

**증상**:
- 정령을 생성하기 전에 정령 마을에 접근하면 빈 화면만 보임
- "정령이 없습니다" 같은 안내 메시지가 없거나 불명확할 수 있음

**개선 아이디어**:
1. 정령이 없을 때 "첫 정령을 생성하세요" 안내 화면
2. 정령 생성 페이지로 가는 버튼 제공

**우선순위**: ⭐⭐⭐

---

### [UX-008] 세계수 레벨업 후 다른 페이지로 이동 시 상태 동기화 문제

**위치**:
- 전역 상태 관리 부재

**증상**:
- 세계수의 심장에서 레벨업 후 월드맵으로 돌아가면
- 레벨이 업데이트되었는지 확인하려면 페이지를 새로고침해야 할 수 있음
- 월드맵이나 다른 페이지에서 최신 레벨 정보를 보여주지 않을 수 있음

**개선 아이디어**:
1. 전역 JavaScript 상태 관리 시스템 구축
2. 레벨업 후 localStorage에 상태 저장
3. 다른 페이지 로드 시 최신 상태 확인 및 동기화

**우선순위**: ⭐⭐⭐

---

## 🟡 Minor 이슈

### [UX-009] 정령 생성 버튼 애니메이션 부족

**위치**:
- `src/main/resources/static/js/world-tree.js`

**증상**:
- 레벨 2 달성 시 정령 생성 버튼이 단순히 나타남
- 해금의 감동이나 중요성을 강조하는 연출이 부족

**개선 아이디어**:
1. 버튼 등장 시 펄스/글로우 애니메이션
2. 작은 파티클 효과
3. 사운드 효과 (선택사항)

**우선순위**: ⭐⭐

---

### [UX-010] 레벨업 애니메이션 후 자동 닫힘 시간이 짧음

**위치**:
- `src/main/resources/static/js/world-tree.js` (라인 232-237)

**증상**:
- 레벨업 애니메이션이 3-4초 후 자동으로 닫힘
- 특히 레벨 2 달성 시 정령 생성 해금 안내를 읽을 시간이 부족할 수 있음

**현재 코드**:
```javascript
setTimeout(() => {
    overlay.classList.remove('show');
}, level === 2 ? 4000 : 3000);
```

**개선 아이디어**:
1. "다음" 버튼 추가하여 사용자가 직접 진행
2. 레벨 2일 때 더 긴 시간 (6-7초)
3. 또는 애니메이션과 별도로 해금 안내를 더 길게 표시

**우선순위**: ⭐⭐

---

### [UX-011] 월드맵 카테고리 아이콘 설명 부족

**위치**:
- `src/main/resources/templates/world.html`

**증상**:
- 카테고리 아이콘만 보고 무엇을 하는 곳인지 알기 어려움
- 툴팁이나 설명 텍스트가 없음

**개선 아이디어**:
1. 호버 시 툴팁 표시
2. 아이콘 아래 간단한 텍스트 설명 추가

**우선순위**: ⭐⭐

---

### [UX-012] 정령 생성 페이지에서 뒤로가기 경로 혼란

**위치**:
- `src/main/resources/templates/spirit-create.html` (라인 82)

**증상**:
- 뒤로가기 버튼이 `/world-tree/core`로 이동
- 하지만 실제 경로는 `/world-tree/heart`일 수 있음
- 경로 불일치 가능성

**개선 아이디어**:
1. 경로 통일
2. 또는 JavaScript로 이전 페이지로 이동 (`history.back()`)

**우선순위**: ⭐

---

## 📊 이슈 요약

| ID | 심각도 | 제목 | 우선순위 |
|----|--------|------|----------|
| UX-001 | 🔴 Critical | 튜토리얼 시스템 부재 | ⭐⭐⭐⭐⭐ |
| UX-002 | 🔴 Critical | 정령 생성 해금 후 UI 실시간 반영 문제 | ⭐⭐⭐⭐⭐ |
| UX-003 | 🔴 Critical | 월드맵에서 정령 생성 접근 불명확 | ⭐⭐⭐⭐ |
| UX-004 | 🟠 Major | 첫 로그인 시 초기 가이드 부재 | ⭐⭐⭐⭐ |
| UX-005 | 🟠 Major | 정령 생성 페이지 접근 제한 시 안내 부족 | ⭐⭐⭐ |
| UX-006 | 🟠 Major | 월드맵 카테고리 모달의 시설 설명 부족 | ⭐⭐⭐ |
| UX-007 | 🟠 Major | 정령 마을 초기 빈 화면 | ⭐⭐⭐ |
| UX-008 | 🟠 Major | 세계수 레벨업 후 상태 동기화 문제 | ⭐⭐⭐ |
| UX-009 | 🟡 Minor | 정령 생성 버튼 애니메이션 부족 | ⭐⭐ |
| UX-010 | 🟡 Minor | 레벨업 애니메이션 후 자동 닫힘 시간이 짧음 | ⭐⭐ |
| UX-011 | 🟡 Minor | 월드맵 카테고리 아이콘 설명 부족 | ⭐⭐ |
| UX-012 | 🟡 Minor | 정령 생성 페이지에서 뒤로가기 경로 혼란 | ⭐ |

---

## 🎯 해결 우선순위

### Phase 1: 핵심 플로우 개선 (최우선)
1. [UX-001] 튜토리얼 시스템 구현
2. [UX-002] 정령 생성 해금 후 실시간 UI 반영 개선
3. [UX-003] 월드맵에서 정령 생성 접근 개선

### Phase 2: 사용성 개선
4. [UX-004] 첫 로그인 가이드
5. [UX-005] 접근 제한 안내 강화
6. [UX-008] 전역 상태 동기화

### Phase 3: 세부 개선
7. [UX-006] 시설 설명 추가
8. [UX-007] 정령 마을 빈 화면 처리
9. 기타 Minor 이슈들

---

## 📝 다음 단계

이 이슈 리스트를 기반으로 **STEP 2**에서 다음을 구현합니다:

1. **튜토리얼 시스템** (UX-001)
2. **실시간 해금 UI 반영** (UX-002)
3. **월드맵 정령 생성 접근 개선** (UX-003)
4. **전역 상태 관리 시스템** (UX-008)

---

**작성일**: 2025-11-29
**다음 검토일**: STEP 2 구현 완료 후

