<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>정령 시합장 - SOI</title>
    <link rel="stylesheet" th:href="@{/css/spirit-arena.css}">
    <link rel="stylesheet" th:href="@{/css/modal.css}">
</head>
<body>
    <div class="arena-container">
        <div class="arena-header">
            <button class="back-btn" onclick="window.location.href='/world'">← 뒤로</button>
            <h1>⚔️ 정령 시합장</h1>
            <p class="subtitle">정령들을 시합시켜 승부를 겨룹니다</p>
        </div>

        <!-- 정령 선택 -->
        <div class="section">
            <h2 class="section-title">정령 선택</h2>
            <div class="spirit-selector">
                <select id="spiritSelect" class="spirit-select">
                    <option value="">정령을 선택하세요</option>
                    <option th:each="spirit : ${spirits}" 
                            th:value="${spirit.id}" 
                            th:data-spirit-type="${spirit.spiritType}"
                            th:data-evolution-stage="${spirit.evolutionStage}"
                            th:text="${spirit.name + ' (' + spirit.spiritType + ' Lv.' + spirit.level + ')'}">정령 이름</option>
                </select>
            </div>
            <!-- 선택된 정령 이미지 표시 -->
            <div id="selectedSpiritPreview" class="spirit-preview" style="display: none; margin-top: 20px; text-align: center;">
                <img id="selectedSpiritImage" src="" alt="선택된 정령" class="spirit-preview-image">
                <div id="selectedSpiritName" class="spirit-preview-name"></div>
            </div>
        </div>

        <!-- 시합 정보 -->
        <div class="section" id="battleSection" style="display: none;">
            <h2 class="section-title">시합 정보</h2>
            <div class="battle-info">
                <p>정령을 선택하면 시합을 시작할 수 있습니다.</p>
                <p class="hint">시합은 정령의 능력치와 기술을 기반으로 진행됩니다.</p>
            </div>
            
            <!-- 난이도 선택 -->
            <div class="difficulty-selection">
                <h3 class="difficulty-title">난이도 선택</h3>
                <div class="difficulty-grid">
                    <div class="difficulty-card" data-difficulty="EASY" onclick="selectDifficulty('EASY', this)">
                        <div class="difficulty-name">쉬움</div>
                        <div class="difficulty-stars">⭐</div>
                        <div class="difficulty-reward">상금: 100골드</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="NORMAL" onclick="selectDifficulty('NORMAL', this)">
                        <div class="difficulty-name">보통</div>
                        <div class="difficulty-stars">⭐⭐</div>
                        <div class="difficulty-reward">상금: 300골드</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="HARD" onclick="selectDifficulty('HARD', this)">
                        <div class="difficulty-name">어려움</div>
                        <div class="difficulty-stars">⭐⭐⭐</div>
                        <div class="difficulty-reward">상금: 500골드</div>
                    </div>
                    <div class="difficulty-card" data-difficulty="EXPERT" onclick="selectDifficulty('EXPERT', this)">
                        <div class="difficulty-name">전문가</div>
                        <div class="difficulty-stars">⭐⭐⭐⭐</div>
                        <div class="difficulty-reward">상금: 1000골드</div>
                    </div>
                </div>
            </div>
            
            <button class="battle-btn" id="battleBtn" onclick="startBattle()" disabled>난이도를 선택하세요</button>
        </div>

        <!-- 시합 결과 -->
        <div class="section" id="battleResultSection" style="display: none;">
            <h2 class="section-title">시합 결과</h2>
            <div class="battle-result" id="battleResult">
                <!-- 시합 결과가 여기에 표시됨 -->
            </div>
        </div>
    </div>

    <script th:src="@{/js/modal.js}"></script>
    <script th:src="@{/js/spirit-arena.js?v=4}"></script>
</body>
</html>

